<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trendvvy</title>
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #000000;
    }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      transition: background 0.3s, color 0.3s;
    }
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      background-color: #2f88b3;
      color: white;
    }
    header .left {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    header svg {
      height: 32px;
      width: 32px;
      margin-right: 10px;
    }
    header h1 {
      font-size: 20px;
      margin: 0;
    }
    .links {
      display: flex;
      gap: 15px;
    }
    .links a {
      color: #fff;
      font-size: 10px;
      text-decoration: underline;
      cursor: pointer;
    }
    .container {
      padding: 20px;
    }
    .card {
      border: 1px solid #ccc;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      background: #f9f9f9;
    }
    .card img {
      max-width: 100%;
      border-radius: 5px;
    }
    .description {
      margin-top: 10px;
    }
    .read-more, .share-link {
      display: inline-block;
      margin-top: 10px;
      background-color: #2f88b3;
      color: white;
      padding: 8px 16px;
      text-decoration: none;
      border-radius: 5px;
      margin-right: 10px;
    }
    .next-button {
      display: block;
      width: fit-content;
      margin: 20px auto;
      background-color: #2f88b3;
      color: white;
      padding: 10px 20px;
      text-decoration: none;
      border-radius: 5px;
    }
    .full-article {
      display: none;
    }
    footer {
      margin-top: 30px;
      padding: 15px;
      font-size: 12px;
      background: #f0f0f0;
      border-top: 1px solid rgba(0,0,0,0.2);
      text-align: center;
      line-height: 1.6;
    }
    footer a {
      color: #2f88b3;
      text-decoration: underline;
    }
    #modeToggle {
      position: fixed;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      background: #222;
      color: white;
      padding: 10px;
      border-radius: 50%;
      cursor: pointer;
      z-index: 999;
      font-size: 10px;
      border: none;
      animation: pulse 1.2s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(47,136,179, 0.4); }
      70% { box-shadow: 0 0 0 12px rgba(47,136,179, 0); }
      100% { box-shadow: 0 0 0 0 rgba(47,136,179, 0); }
    }
  </style>
</head>
<body>
  <header onclick="window.location.reload()">
    <div class="left">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="#fff" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 17L9 11L13 15L21 7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <h1>Trendvvy</h1>
    </div>
    <div class="links">
      <a href="#" onclick="alert('Privacy Policy')">Privacy</a>
      <a href="#" onclick="alert('Terms and Conditions')">Terms</a>
      <a href="#" onclick="alert('Contact us at millioncoursesdesk@gmail.com')">Contact</a>
    </div>
  </header>

  <!-- AdSense Code Start -->
  <div style="margin: 10px auto; max-width: 728px;">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8770025326243136"
      crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
      style="display:block"
      data-ad-format="fluid"
      data-ad-layout-key="-fb+5w+4e-db+86"
      data-ad-client="ca-pub-8770025326243136"
      data-ad-slot="3034279255"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  <!-- AdSense Code End -->

  <div class="container" id="posts"></div>
  <a href="#" class="next-button" onclick="loadMorePosts(event)">Next Page</a>

  <button id="modeToggle">Dark Mode</button>

  <footer>
    <p>
      Want to publish your video, story, or trending content on Trendvvy?<br>
      <strong>Contact us</strong> or apply to join our <strong>Trendvvy Blogger Network</strong>.<br>
      üìß Email: <a href="mailto:millioncoursesdesk@gmail.com">millioncoursesdesk@gmail.com</a><br>
      ‚òéÔ∏è WhatsApp: <a href="https://wa.me/27792586566">+27 79 258 6566</a>
    </p>
  </footer>

  <script>
    const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTyb5Dj0JCF45CFnjH1rAt3rOXxMDBnS63f_WwSODq4qIRBLDMBK5GkTWbHB8_OdHtjLnCNsAtnqEy-/pub?output=csv';
    let allPosts = [];
    let currentIndex = 0;
    const limit = 7;

    function createCard({ title, image, summary, content_paragraphs, video_url }) {
      const card = document.createElement('div');
      card.className = 'card';

      const img = document.createElement('img');
      img.src = image;
      card.appendChild(img);

      const desc = document.createElement('div');
      desc.className = 'description';
      desc.innerHTML = `<h3>${title}</h3><p>${summary}</p>`;

      const readMore = document.createElement('a');
      readMore.href = '#';
      readMore.className = 'read-more';
      readMore.textContent = 'Read More';

      const shareLink = document.createElement('a');
      shareLink.href = `${location.href.split('?')[0]}?title=${encodeURIComponent(title)}`;
      shareLink.className = 'share-link';
      shareLink.textContent = 'Share';

      const fullArticle = document.createElement('div');
      fullArticle.className = 'full-article';

      if (content_paragraphs) {
        content_paragraphs.split('\n').forEach(p => {
          const paragraph = document.createElement('p');
          paragraph.textContent = p.trim();
          fullArticle.appendChild(paragraph);
        });
      }

      if (video_url) {
        let videoEmbed;
        if (video_url.endsWith('.mp4')) {
          videoEmbed = document.createElement('video');
          videoEmbed.src = video_url;
          videoEmbed.controls = true;
          videoEmbed.width = '100%';
          videoEmbed.style.maxHeight = '300px';
        } else {
          videoEmbed = document.createElement('iframe');
          videoEmbed.src = video_url;
          videoEmbed.width = '100%';
          videoEmbed.height = '300';
          videoEmbed.allowFullscreen = true;
          videoEmbed.frameBorder = 0;
        }
        fullArticle.appendChild(videoEmbed);
      }

      readMore.addEventListener('click', e => {
        e.preventDefault();
        fullArticle.style.display = 'block';
        readMore.style.display = 'none';
      });

      desc.appendChild(readMore);
      desc.appendChild(shareLink);
      card.appendChild(desc);
      card.appendChild(fullArticle);
      return card;
    }

    function loadMorePosts(e) {
      e?.preventDefault();
      const container = document.getElementById('posts');
      const slice = allPosts.slice(currentIndex, currentIndex + limit);
      slice.forEach(post => container.appendChild(createCard(post)));
      currentIndex += limit;
    }

    fetch(SHEET_URL)
      .then(res => res.text())
      .then(csv => {
        if (!csv) return;
        const lines = csv.split('\n');
        const headers = lines[0].split(',');
        for (let i = 1; i < lines.length; i++) {
          const row = lines[i].split(',');
          const post = {};
          headers.forEach((header, j) => {
            post[header.trim()] = row[j];
          });
          allPosts.push(post);
        }
        loadMorePosts();
      })
      .catch(err => console.error('Failed to fetch or parse CSV:', err));

    const toggle = document.getElementById('modeToggle');
    const modes = [
      { label: 'Dark Mode', bg: '#000000', color: '#ffffff' },
      { label: 'Trendvvy Mode', bg: 'linear-gradient(to right, silver, grey)', color: '#000000' },
      { label: 'Light Mode', bg: '#ffffff', color: '#000000' },
    ];
    let current = 0;

    toggle.addEventListener('click', () => {
      current = (current + 1) % modes.length;
      const mode = modes[current];
      document.body.style.background = mode.bg;
      document.body.style.color = mode.color;
      toggle.textContent = modes[(current + 1) % modes.length].label;
    });
  </script>
</body>
</html>
